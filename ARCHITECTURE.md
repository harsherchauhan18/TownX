# ğŸ—ï¸ Place Recommender Agent - Architecture Diagram

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          TOWNX APPLICATION                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    FRONTEND (React)                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚           HomePage.jsx                               â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Sidebar                                      â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ [New Investigation]                   â”‚  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ [Place Finder] â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ Recent Chats              â”‚            â”‚  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                           â”‚                                 â”‚  â”‚
â”‚  â”‚                           â”‚ navigate('/recommender')        â”‚  â”‚
â”‚  â”‚                           â–¼                                 â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚           RecommenderPage.jsx (NEW)                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                      â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Chat Interface                              â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ [Messages Display]                  â”‚   â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ User: "Find cafes nearby"          â”‚   â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ Agent: "Found cafes for you..."    â”‚   â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Input: [       "..."]  [Send]              â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Quick: [â˜•Cafes] [ğŸ•Pizza] [ğŸ¨Hotels]   â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚ User submits query                       â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â–¼                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ State: userQuery                            â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Call: /api/agent-search                     â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚ Wait for agent response                 â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â–¼                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ MapModal.jsx (NEW)                          â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ [X Close] Place Finder                â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚ [coffee cafe     ] [Search]            â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚                  â”‚ Results:            â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚   Leaflet Map    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚ â”‚ Cafe XYZ       â”‚ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•‘   ğŸ“        â•‘ â”‚ â”‚ Main Street    â”‚ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•‘   â€¢  â€¢      â•‘ â”‚ â”‚ 0.5 km away   â”‚ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•‘  â€¢   â€¢  â€¢   â•‘ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•‘   â€¢      â€¢  â•‘ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•‘       â€¢  â€¢  â•‘ â”‚ â”‚ Coffee House   â”‚ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚ â”‚ Park Road      â”‚ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚  (Markers shown)  â”‚ â”‚ 1.2 km away   â”‚ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â”‚                  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  User Location: 28.6139, 77.2090           â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚                                          â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚ Auto-calls /api/search-places           â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â”‚ with search keywords from agent         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚           â–¼                                          â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                           â”‚                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚                       â”‚                       â”‚            â”‚
â”‚      â–¼                       â–¼                       â–¼            â”‚
â”‚   (Axios HTTP Requests)                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚      BACKEND (Express.js / Node.js)        â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚                                            â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
      â”‚  â”‚     /api/agent-search (NEW)          â”‚ â”‚
      â”‚  â”‚                                      â”‚ â”‚
      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
      â”‚  â”‚  â”‚  Request Body:                  â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  {                              â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚    userQuery: "Find cafes"      â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚    latitude: 28.6139            â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚    longitude: 77.209            â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  }                              â”‚ â”‚ â”‚
      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
      â”‚  â”‚              â”‚                        â”‚ â”‚
      â”‚  â”‚              â–¼                        â”‚ â”‚
      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
      â”‚  â”‚  â”‚  agent-commonjs.js (NEW)        â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  LangGraph Agent Service        â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚                                 â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ Extract Node              â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ ChatGroq LLM:       â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ Parse user query    â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ Extract location    â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ types               â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚              â”‚                 â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚              â–¼                 â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ Validate Node             â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ Normalize types:    â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ "coffee" â†’ "cafe"   â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ Map to categories   â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ Merge keywords      â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚              â”‚                 â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚              â–¼                 â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ Radius Node               â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ Determine radius:   â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ "nearby" â†’ 2km      â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ "around" â†’ 10km     â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â”‚ default â†’ 5km       â”‚   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚ â”‚
      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
      â”‚  â”‚                 â”‚                    â”‚ â”‚
      â”‚  â”‚                 â–¼                    â”‚ â”‚
      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
      â”‚  â”‚  â”‚ Response Body:                  â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚ {                               â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚   success: true,                â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚   agent: {                      â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚     locationTypes: ["cafe"],    â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚     searchKeywords:             â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚       ["coffee", "cafe"],       â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚     searchRadius: 2,            â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚     reasoning: "..."            â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚   }                             â”‚ â”‚ â”‚
      â”‚  â”‚  â”‚ }                               â”‚ â”‚ â”‚
      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
      â”‚                   â”‚                       â”‚
      â”‚                   â”‚                       â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
      â”‚  â”‚   /api/search-places (EXISTING)   â”‚   â”‚
      â”‚  â”‚                                   â”‚   â”‚
      â”‚  â”‚  Input: {                        â”‚   â”‚
      â”‚  â”‚    latitude: 28.6139             â”‚   â”‚
      â”‚  â”‚    longitude: 77.209             â”‚   â”‚
      â”‚  â”‚    query: "coffee cafe"          â”‚   â”‚
      â”‚  â”‚    limit: 20                     â”‚   â”‚
      â”‚  â”‚  }                               â”‚   â”‚
      â”‚  â”‚                  â”‚                â”‚   â”‚
      â”‚  â”‚                  â–¼                â”‚   â”‚
      â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚   â”‚
      â”‚  â”‚  â”‚ Nominatim OpenStreetMap API â”‚â”‚   â”‚
      â”‚  â”‚  â”‚ (Existing Integration)       â”‚â”‚   â”‚
      â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚   â”‚
      â”‚  â”‚                  â”‚                â”‚   â”‚
      â”‚  â”‚                  â–¼                â”‚   â”‚
      â”‚  â”‚  Output: {                       â”‚   â”‚
      â”‚  â”‚    success: true,                â”‚   â”‚
      â”‚  â”‚    places: [                     â”‚   â”‚
      â”‚  â”‚      {                           â”‚   â”‚
      â”‚  â”‚        id: 123,                  â”‚   â”‚
      â”‚  â”‚        name: "Cafe XYZ",         â”‚   â”‚
      â”‚  â”‚        latitude: 28.615,         â”‚   â”‚
      â”‚  â”‚        longitude: 77.210,        â”‚   â”‚
      â”‚  â”‚        displayName: "...",       â”‚   â”‚
      â”‚  â”‚        type: "cafe",             â”‚   â”‚
      â”‚  â”‚        distance: 0.5 km          â”‚   â”‚
      â”‚  â”‚      },                          â”‚   â”‚
      â”‚  â”‚      ...                         â”‚   â”‚
      â”‚  â”‚    ],                            â”‚   â”‚
      â”‚  â”‚    count: 20                     â”‚   â”‚
      â”‚  â”‚  }                               â”‚   â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
      â”‚                                        â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    App.jsx (Router)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Routes:                             â”‚
â”‚ / â†’ HomePage (ProtectedRoute)       â”‚
â”‚ /recommender â†’ RecommenderPage  â—„â”€â”€ NEW
â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                             â”‚
               â–¼                             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  HomePage.jsx    â”‚         â”‚ RecommenderPage.jsx  â”‚ â—„â”€â”€ NEW
      â”‚                  â”‚         â”‚ (Main Interface)     â”‚
      â”‚ - Chat UI        â”‚         â”‚                      â”‚
      â”‚ - Messages       â”‚         â”‚ - Chat Interface     â”‚
      â”‚ - [Place Finder] â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ - State Management   â”‚
      â”‚   Button â—„â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ - Location Detection â”‚
      â”‚                            â”‚ - Auto-open MapModal â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  MapModal.jsx (NEW)  â”‚
                                   â”‚                      â”‚
                                   â”‚ - Leaflet Map        â”‚
                                   â”‚ - Search Interface   â”‚
                                   â”‚ - Result Display     â”‚
                                   â”‚ - Marker Management  â”‚
                                   â”‚ - Distance Calc      â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ Uses
                                          â”‚
                                    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Leaflet.js â”‚
                                    â”‚ (npm)      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

```
USER INPUT
    â”‚
    â”‚ "Find cafes nearby"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RecommenderPage State       â”‚
â”‚ {                           â”‚
â”‚   messages: [...],          â”‚
â”‚   input: "Find cafes...",   â”‚
â”‚   userLocation: {lat,lon},  â”‚
â”‚   agentData: null           â”‚
â”‚ }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ handleSend()
           â”‚
           â–¼
    POST /api/agent-search
    {
      userQuery: "Find cafes nearby",
      latitude: 28.6139,
      longitude: 77.209
    }
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                â”‚
           â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ LangGraph Agent Processing      â”‚
    â”‚                                 â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚ â”‚ Extract Node               â”‚  â”‚
    â”‚ â”‚ â†’ locationTypes: ["cafe"]  â”‚  â”‚
    â”‚ â”‚ â†’ keywords: ["coffee"]     â”‚  â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                â”‚                â”‚
    â”‚                â–¼                â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚ â”‚ Validate Node              â”‚  â”‚
    â”‚ â”‚ â†’ type: cafe âœ“             â”‚  â”‚
    â”‚ â”‚ â†’ keywords: [...]          â”‚  â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                â”‚                â”‚
    â”‚                â–¼                â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚ â”‚ Radius Node                â”‚  â”‚
    â”‚ â”‚ â†’ radius: 2 km (nearby)    â”‚  â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Response                        â”‚
    â”‚ {                               â”‚
    â”‚   locationTypes: ["cafe"],      â”‚
    â”‚   searchKeywords:               â”‚
    â”‚     ["coffee", "cafe"],         â”‚
    â”‚   searchRadius: 2,              â”‚
    â”‚   reasoning: "..."              â”‚
    â”‚ }                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frontend Update State           â”‚
    â”‚ {                               â”‚
    â”‚   messages: [..., agentMsg],    â”‚
    â”‚   agentData: {...},             â”‚
    â”‚   mapOpen: true                 â”‚
    â”‚ }                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚ Auto-open MapModal
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MapModal Opens                  â”‚
    â”‚                                 â”‚
    â”‚ Auto-fill search: "coffee cafe" â”‚
    â”‚ Auto-trigger search             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    POST /api/search-places
    {
      latitude: 28.6139,
      longitude: 77.209,
      query: "coffee cafe",
      limit: 20
    }
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚             â”‚
               â–¼             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ OpenStreetMap Nominatim API      â”‚
    â”‚ (Bounded search with location    â”‚
    â”‚  bias, fallback to unbounded)    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Response: Array of Places        â”‚
    â”‚ [                                â”‚
    â”‚   {id, name, lat, lon, type},    â”‚
    â”‚   {id, name, lat, lon, type},    â”‚
    â”‚   ...                            â”‚
    â”‚ ]                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MapModal Updates                 â”‚
    â”‚                                  â”‚
    â”‚ - setSearchResults(places)       â”‚
    â”‚ - Clear old markers              â”‚
    â”‚ - Add new markers to map         â”‚
    â”‚ - Update results list            â”‚
    â”‚ - Fit bounds to show all         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    BEAUTIFUL MAP WITH RESULTS! ğŸ—ºï¸
```

---

## API Call Sequence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend     â”‚
â”‚ Browser      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1. POST /api/agent-search
       â”‚    {"userQuery": "Find cafes", ...}
       â”‚
       â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Agent Endpoint      â”‚
       â”‚ /api/agent-search   â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 2. Call processUserQuery()
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Agent Service                    â”‚
       â”‚ agent-commonjs.js                â”‚
       â”‚                                  â”‚
       â”‚ Call ChatGroq LLM:               â”‚
       â”‚ - System prompt                  â”‚
       â”‚ - User query                     â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 3. HTTP to Groq API
              â”‚ (OpenAI-compatible endpoint)
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Groq API             â”‚
       â”‚ Model: llama-3.3-70b â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 4. Return LLM response
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Agent Processing                 â”‚
       â”‚                                  â”‚
       â”‚ Parse LLM output:                â”‚
       â”‚ - Extract locationTypes          â”‚
       â”‚ - Validate & normalize           â”‚
       â”‚ - Determine search radius        â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 5. Return agent result
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Agent Endpoint       â”‚
       â”‚ Format response      â”‚
       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ 6. Return JSON to frontend
              â”‚    {success, agent, instructions}
              â”‚
              â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ Frontend     â”‚
       â”‚ Receives     â”‚
       â”‚ Response     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
                                  â”‚
                                  â”‚ 7. MapModal opens
                                  â”‚
                                  â–¼
                           POST /api/search-places
                           {"latitude": ..., "longitude": ...,
                            "query": "...", "limit": 20}
                                  â”‚
                                  â–¼
                           /api/search-places
                           (existing endpoint)
                                  â”‚
                                  â”‚ Call fetchNominatim()
                                  â”‚
                                  â–¼
                           Nominatim OpenStreetMap API
                                  â”‚
                                  â”‚ 8. Return places
                                  â”‚
                                  â–¼
                           Return to MapModal
                                  â”‚
                                  â”‚ 9. Update map & results
                                  â”‚
                                  â–¼
                           DISPLAY ON MAP âœ“
```

---

## State Management Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RecommenderPage Component               â”‚
â”‚                                         â”‚
â”‚ State:                                  â”‚
â”‚ â”œâ”€ messages: Message[]                  â”‚
â”‚ â”œâ”€ input: string                        â”‚
â”‚ â”œâ”€ isTyping: boolean                    â”‚
â”‚ â”œâ”€ userLocation: {lat, lon}             â”‚
â”‚ â”œâ”€ agentData: AgentResponse             â”‚
â”‚ â”œâ”€ mapOpen: boolean                     â”‚
â”‚ â””â”€ isLoadingAgent: boolean              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€ onSend()
             â”‚  â”œâ”€ Add message to state
             â”‚  â”œâ”€ Call /api/agent-search
             â”‚  â”œâ”€ Update messages with response
             â”‚  â””â”€ Open map
             â”‚
             â”œâ”€ handlePromptClick()
             â”‚  â””â”€ Set input text
             â”‚
             â”œâ”€ useEffect (geolocation)
             â”‚  â””â”€ Get user location on mount
             â”‚
             â””â”€ Pass Props:
                â”œâ”€ mapOpen â†’ MapModal
                â”œâ”€ agentData â†’ MapModal
                â””â”€ userLocation â†’ MapModal
                     â”‚
                     â–¼
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚ MapModal Component           â”‚
             â”‚                              â”‚
             â”‚ Props:                       â”‚
             â”‚ â”œâ”€ isOpen: boolean           â”‚
             â”‚ â”œâ”€ onClose: function         â”‚
             â”‚ â”œâ”€ agentData: {...}          â”‚
             â”‚ â””â”€ userLocation: {lat, lon}  â”‚
             â”‚                              â”‚
             â”‚ State:                       â”‚
             â”‚ â”œâ”€ searchResults: Place[]    â”‚
             â”‚ â”œâ”€ isLoading: boolean        â”‚
             â”‚ â”œâ”€ searchQuery: string       â”‚
             â”‚ â””â”€ markers: Marker[]         â”‚
             â”‚                              â”‚
             â”‚ Effects:                     â”‚
             â”‚ â”œâ”€ Initialize map on open    â”‚
             â”‚ â”œâ”€ Set search from agent     â”‚
             â”‚ â””â”€ Auto-trigger search       â”‚
             â”‚                              â”‚
             â”‚ Methods:                     â”‚
             â”‚ â””â”€ handleSearch()            â”‚
             â”‚    â”œâ”€ Call /api/search-placesâ”‚
             â”‚    â”œâ”€ Update results         â”‚
             â”‚    â”œâ”€ Clear old markers      â”‚
             â”‚    â”œâ”€ Add new markers        â”‚
             â”‚    â””â”€ Fit bounds             â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This comprehensive architecture diagram shows:
1. **System Layout**: Frontend, Backend, and APIs
2. **Component Hierarchy**: Navigation and relationships
3. **Data Flow**: How data moves through the system
4. **API Sequences**: Request/response order
5. **State Management**: React state and props

**Color Coding**:
- ğŸ“ = Location-related
- ğŸ” = Search/Place-related
- ğŸ¤– = AI/Agent-related
- ğŸ—ºï¸ = Map-related
- âœ“ = Completion/Success
